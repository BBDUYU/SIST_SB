<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>메인</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Bootstrap Icons (하트/벨/위치) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

  <style>
    :root {
      --brand: #1E3A8A;
      --bg: #F9F8FF;
    }
    body { background: var(--bg); }

    /* navbar */
    .navbar-brand { font-weight: 800; letter-spacing: -0.2px; }
    .nav-gap { gap: 24px; }

    /* main layout height */
    .app-main {
      height: calc(100vh - 60px); /* navbar height */
      min-height: 560px;
    }

    /* left list panel */
    .list-panel {
      background: #f3f4f6;
      border-right: 1px solid #e5e7eb;
      height: 100%;
      overflow: hidden;
    }
    .list-scroll {
      overflow-y: auto;
      height: calc(100% - 56px); /* filter bar height */
      padding: 12px;
    }

    /* filter bar */
    .filter-bar {
      height: 56px;
      background: #fff;
      border-bottom: 1px solid #e5e7eb;
      padding: 10px 12px;
    }

    /* list item card */
    .house-card {
      border: 0;
      border-radius: 12px;
      box-shadow: 0 1px 8px rgba(0,0,0,.06);
    }
    .thumb {
      width: 96px;
      height: 72px;
      border-radius: 10px;
      background: #e5e7eb;
      flex: 0 0 auto;
    }

    /* map */
    .map-wrap {
      position: relative;
      height: 100%;
      background: #e5e7eb;
    }
    .map-placeholder {
      position: absolute;
      inset: 0;
      display: grid;
      place-items: center;
      color: #6b7280;
      user-select: none;
    }

    /* floating buttons */
    .fab-stack {
      position: absolute;
      right: 18px;
      bottom: 18px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      z-index: 10;
    }
    .fab {
      width: 48px;
      height: 48px;
      border-radius: 999px;
      box-shadow: 0 10px 18px rgba(0,0,0,.12);
      display: grid;
      place-items: center;
    }
    .badge-dot {
      position: absolute;
      top: -4px;
      right: -4px;
    }

    /* mobile: stack */
    @media (max-width: 767.98px) {
      .app-main { height: auto; }
      .list-panel { height: 520px; }
      .map-wrap { height: 520px; }
    }
  </style>
</head>

<body>

<!-- ✅ HEADER (처음 이미지 느낌: 로고 좌측 + 메뉴 우측 가로) -->
<nav class="navbar navbar-expand-lg" style="height:60px;background:var(--brand);">
  <div class="container-fluid px-3">
    <a class="navbar-brand text-white" href="/">대충로고</a>

    <button class="navbar-toggler text-white border-0" type="button"
            data-bs-toggle="collapse" data-bs-target="#topNav">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse justify-content-end" id="topNav">
      <ul class="navbar-nav align-items-lg-center nav-gap">

        <li class="nav-item">
          <a class="nav-link text-white-50 hover text-white" href="/wishlist">위시리스트</a>
        </li>

        <!-- 게시판 드롭다운 (Bootstrap 기본: click) -->
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle text-white" href="#" role="button"
             data-bs-toggle="dropdown" aria-expanded="false">
            게시판
          </a>
          <ul class="dropdown-menu dropdown-menu-end">
            <li><a class="dropdown-item" href="/board">전체</a></li>
            <li><a class="dropdown-item" href="/board/notice">공지사항</a></li>
            <li><a class="dropdown-item" href="/board/free">자유게시판</a></li>
            <li><a class="dropdown-item" href="/board/qna">Q&A</a></li>
          </ul>
        </li>

        <!-- ✅ 로그인 전/후 분기 (1) Spring Security 쓰면 아래 주석 참고 -->
        <!-- 방법 A: model에 isLogin(boolean) 내려주는 방식 -->
        <li class="nav-item" th:if="${isLogin == false}">
          <a class="btn btn-outline-light rounded-pill px-3" href="/member/login">로그인</a>
        </li>
        <li class="nav-item" th:if="${isLogin == false}">
          <a class="nav-link text-white" href="/member/signup">회원가입</a>
        </li>

        <li class="nav-item" th:if="${isLogin == true}">
          <a class="nav-link text-white" href="/member/logout">로그아웃</a>
        </li>
        <li class="nav-item" th:if="${isLogin == true}">
          <a class="nav-link text-white" href="/mypage">마이페이지</a>
        </li>

        <!-- 방법 B: Spring Security thymeleaf-extras 사용 시
        <li class="nav-item" sec:authorize="isAnonymous()">
          <a class="btn btn-outline-light rounded-pill px-3" href="/member/login">로그인</a>
        </li>
        <li class="nav-item" sec:authorize="isAnonymous()">
          <a class="nav-link text-white" href="/member/signup">회원가입</a>
        </li>
        <li class="nav-item" sec:authorize="isAuthenticated()">
          <a class="nav-link text-white" href="/member/logout">로그아웃</a>
        </li>
        <li class="nav-item" sec:authorize="isAuthenticated()">
          <a class="nav-link text-white" href="/mypage">마이페이지</a>
        </li>
        -->

      </ul>
    </div>
  </div>
</nav>

<!-- ✅ MAIN -->
<div class="container-fluid px-0">
  <div class="row g-0 app-main">

    <!-- LEFT: 리스트 -->
    <aside class="col-md-4 list-panel">

      <!-- 필터바 -->
      <div class="filter-bar d-flex align-items-center gap-2">
        <button class="btn btn-light border" type="button" title="필터">
          <i class="bi bi-sliders"></i>
        </button>

        <select class="form-select" aria-label="주거형태">
          <option selected>주거형태</option>
          <option value="HAPPY">행복주택</option>
          <option value="PUBLIC">공공임대</option>
          <option value="JEONSE">청년전세</option>
        </select>

        <select class="form-select" aria-label="평수">
          <option selected>평수</option>
          <option value="10">~10평</option>
          <option value="20">~20평</option>
          <option value="30">~30평</option>
        </select>

        <select class="form-select" aria-label="가격">
          <option selected>가격</option>
          <option value="1">~1억</option>
          <option value="2">~2억</option>
          <option value="3">~3억</option>
        </select>
      </div>

      <!-- 리스트 스크롤 -->
      <div class="list-scroll">
        <!-- 예시: 서버에서 houses 내려주면 th:each로 렌더 -->
        <div class="card house-card mb-3" th:each="h : ${houses}">
          <div class="card-body d-flex gap-3 align-items-start">
            <div class="thumb"></div>

            <div class="flex-grow-1">
              <div class="d-flex justify-content-between align-items-start">
                <div>
                  <div class="fw-semibold" th:text="${h.title}">마포 행복주택</div>
                  <div class="small text-muted mt-1" th:text="${h.desc}">홍대입구역 도보 10분 | 신축 | 전용 17평</div>
                </div>

                <!-- 위시 하트 -->
                <button class="btn btn-link p-0 text-muted"
                        type="button"
                        th:attr="data-id=${h.id}"
                        title="위시리스트">
                  <!-- 채움/빈하트는 JS로 토글하거나, 서버값으로 분기 -->
                  <i class="bi bi-heart"></i>
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- 샘플 데이터 없을 때 보여줄 더미 -->
        <div th:if="${houses == null or #lists.isEmpty(houses)}">
          <div class="card house-card mb-3">
            <div class="card-body d-flex gap-3 align-items-start">
              <div class="thumb"></div>
              <div class="flex-grow-1">
                <div class="fw-semibold">마포 행복주택</div>
                <div class="small text-muted mt-1">홍대입구역 도보 10분 | 신축 | 전용 17평</div>
              </div>
              <button class="btn btn-link p-0 text-muted" type="button"><i class="bi bi-heart"></i></button>
            </div>
          </div>
          <div class="card house-card mb-3">
            <div class="card-body d-flex gap-3 align-items-start">
              <div class="thumb"></div>
              <div class="flex-grow-1">
                <div class="fw-semibold">성동 청년주택</div>
                <div class="small text-muted mt-1">왕십리역 인근 | 편의시설 우수 | 전용 22평</div>
              </div>
              <button class="btn btn-link p-0 text-muted" type="button"><i class="bi bi-heart"></i></button>
            </div>
          </div>
        </div>

      </div>
    </aside>

    <!-- RIGHT: 지도 -->
    <section class="col-md-8">
      <div class="map-wrap">
        <div class="map-placeholder text-center">
          <div>
            <div style="font-size:64px;"><i class="bi bi-geo-alt"></i></div>
            <div class="fw-semibold">Map View</div>
            <div class="small">지도 영역</div>
          </div>
        </div>

        <!-- 플로팅 버튼 -->
        <div class="fab-stack">
          <button class="btn btn-light fab position-relative" type="button" title="알림">
            <i class="bi bi-bell"></i>
            <span class="badge bg-danger rounded-pill badge-dot" th:if="${alarmCount != null and alarmCount > 0}"
                  th:text="${alarmCount}">3</span>
          </button>
          <button class="btn btn-light fab" type="button" title="내 위치">
            <i class="bi bi-crosshair"></i>
          </button>
        </div>
      </div>
    </section>

  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>